[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\nimport pandas as pd\ndf=pd.read_csv('crime.csv',encoding='EUC-KR')\ndf\n\n\n\n\n\n\n\n\n시점\n범죄발생요일별(1)\n강력범죄\n강력범죄.1\n강력범죄.2\n강력범죄.3\n강력범죄.4\n강력범죄.5\n강력범죄.6\n강력범죄.7\n...\n지능범죄\n지능범죄.1\n지능범죄.2\n지능범죄.3\n지능범죄.4\n지능범죄.5\n지능범죄.6\n지능범죄.7\n지능범죄.8\n지능범죄.9\n\n\n\n\n0\n시점\n범죄발생요일별(1)\n소계\n살인기수\n살인미수등\n강도\n강간\n유사강간\n강제추행\n기타 강간·강제추행등\n...\n소계\n직무유기\n직권남용\n증수뢰\n통화\n문서·인장\n유가증권인지\n사기\n횡령\n배임\n\n\n1\n2018\n일요일\n4154\n54\n72\n126\n906\n127\n2564\n49\n...\n27392\n39\n33\n22\n34\n673\n17\n19524\n6802\n248\n\n\n2\n2018\n월요일\n3529\n40\n74\n120\n698\n113\n2197\n51\n...\n56954\n105\n96\n53\n230\n2202\n20\n45478\n7968\n802\n\n\n3\n2018\n화요일\n3619\n38\n62\n133\n709\n103\n2263\n48\n...\n56076\n92\n110\n57\n226\n1992\n25\n45020\n7793\n761\n\n\n4\n2018\n수요일\n3693\n53\n68\n116\n743\n96\n2333\n49\n...\n56448\n92\n110\n69\n208\n1893\n30\n45399\n7922\n725\n\n\n5\n2018\n목요일\n3659\n41\n76\n117\n646\n99\n2389\n45\n...\n57746\n114\n110\n64\n242\n2710\n32\n45752\n7992\n730\n\n\n6\n2018\n금요일\n3834\n54\n67\n101\n699\n99\n2547\n55\n...\n58834\n103\n104\n61\n212\n1991\n58\n46698\n8817\n790\n\n\n7\n2018\n토요일\n4299\n29\n69\n108\n892\n139\n2760\n59\n...\n31248\n36\n40\n21\n42\n829\n15\n22158\n7819\n288\n\n\n8\n2019\n일요일\n4081\n38\n71\n111\n869\n145\n2580\n58\n...\n29037\n24\n44\n13\n35\n620\n8\n20814\n7231\n248\n\n\n9\n2019\n월요일\n3519\n45\n70\n113\n686\n99\n2272\n53\n...\n64776\n108\n126\n46\n186\n2130\n22\n52740\n8559\n859\n\n\n10\n2019\n화요일\n3607\n48\n68\n116\n734\n109\n2306\n45\n...\n63173\n123\n118\n42\n169\n1971\n16\n51876\n8128\n730\n\n\n11\n2019\n수요일\n3634\n40\n62\n105\n719\n92\n2358\n49\n...\n62642\n106\n97\n52\n187\n1840\n30\n51225\n8318\n787\n\n\n12\n2019\n목요일\n3445\n37\n73\n124\n682\n89\n2231\n39\n...\n63327\n99\n107\n42\n177\n2032\n21\n51654\n8460\n735\n\n\n13\n2019\n금요일\n3880\n49\n85\n121\n722\n112\n2542\n43\n...\n64724\n102\n136\n45\n178\n1978\n24\n52039\n9317\n905\n\n\n14\n2019\n토요일\n4310\n40\n53\n108\n898\n136\n2831\n38\n...\n33854\n28\n46\n20\n48\n772\n19\n24124\n8495\n302\n\n\n15\n2020\n일요일\n3637\n58\n57\n77\n909\n118\n2185\n32\n...\n32442\n36\n36\n15\n30\n570\n2\n24493\n7045\n215\n\n\n16\n2020\n월요일\n3320\n53\n68\n118\n699\n96\n2068\n38\n...\n73767\n152\n122\n40\n141\n2197\n13\n61648\n8753\n701\n\n\n17\n2020\n화요일\n3121\n53\n50\n98\n667\n100\n1964\n25\n...\n70867\n119\n123\n64\n123\n2006\n15\n59192\n8497\n728\n\n\n18\n2020\n수요일\n3402\n43\n60\n103\n712\n135\n2152\n36\n...\n69560\n134\n115\n38\n101\n1974\n19\n57917\n8527\n735\n\n\n19\n2020\n목요일\n3312\n30\n62\n105\n701\n112\n2082\n28\n...\n70131\n117\n126\n63\n110\n1956\n14\n58505\n8537\n703\n\n\n20\n2020\n금요일\n3644\n42\n51\n84\n760\n111\n2390\n31\n...\n70358\n123\n157\n46\n99\n2100\n15\n57481\n9572\n765\n\n\n21\n2020\n토요일\n3896\n29\n68\n78\n865\n151\n2503\n47\n...\n37517\n49\n45\n23\n22\n730\n6\n28439\n7958\n245\n\n\n22\n2021\n일요일\n3251\n39\n53\n84\n878\n125\n1862\n46\n...\n26069\n29\n49\n22\n17\n416\n2\n19660\n5692\n182\n\n\n23\n2021\n월요일\n3267\n34\n64\n53\n773\n139\n1994\n37\n...\n63251\n200\n162\n56\n76\n2026\n18\n52445\n7572\n696\n\n\n24\n2021\n화요일\n2953\n38\n56\n68\n656\n93\n1844\n41\n...\n62213\n178\n152\n62\n72\n1959\n11\n51793\n7367\n619\n\n\n25\n2021\n수요일\n3119\n32\n55\n72\n654\n122\n2025\n28\n...\n59925\n166\n142\n62\n61\n1843\n8\n49687\n7395\n561\n\n\n26\n2021\n목요일\n3127\n37\n48\n66\n706\n106\n1988\n35\n...\n60576\n180\n174\n67\n69\n1853\n10\n50177\n7486\n560\n\n\n27\n2021\n금요일\n3228\n52\n59\n88\n695\n100\n2071\n27\n...\n58798\n165\n156\n99\n68\n1790\n8\n47878\n8019\n615\n\n\n28\n2021\n토요일\n3531\n38\n53\n64\n901\n129\n2178\n24\n...\n30275\n39\n40\n34\n13\n585\n6\n22435\n6890\n233\n\n\n29\n2022\n일요일\n3596\n32\n65\n82\n869\n145\n2185\n32\n...\n30173\n66\n75\n11\n12\n484\n3\n22374\n7000\n148\n\n\n30\n2022\n월요일\n3445\n43\n62\n80\n770\n131\n2163\n36\n...\n68747\n301\n345\n44\n90\n2082\n8\n56266\n8944\n667\n\n\n31\n2022\n화요일\n3420\n43\n76\n91\n728\n123\n2153\n29\n...\n68148\n307\n344\n59\n80\n2073\n17\n55981\n8623\n664\n\n\n32\n2022\n수요일\n3403\n46\n54\n64\n718\n137\n2214\n29\n...\n66354\n278\n314\n51\n86\n1946\n10\n54397\n8629\n643\n\n\n33\n2022\n목요일\n3411\n39\n57\n58\n681\n125\n2223\n31\n...\n67742\n280\n370\n56\n77\n1985\n10\n55538\n8786\n640\n\n\n34\n2022\n금요일\n3653\n37\n58\n73\n772\n129\n2359\n35\n...\n68516\n276\n277\n74\n83\n2022\n8\n55241\n9845\n690\n\n\n35\n2022\n토요일\n4026\n35\n55\n68\n929\n157\n2567\n33\n...\n35425\n42\n67\n25\n24\n667\n2\n26051\n8393\n154\n\n\n\n\n36 rows × 30 columns"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "어느 요일이 범죄로부터 가장 안전할까?",
    "section": "",
    "text": "2018~2022년 강력/폭력/지능범죄의 요일별 발생 건수 데이터\n\n\n가설 : 평일이 상대적으로 안전할 것이다.\n\n\n범죄의 정의\n\n강력범죄 : 생명, 신체, 자유에 심각한 위협을 가하는 범죄\n폭력범죄 : 다른 사람에게 신체적 상해를 입히거나 신체적 위협을 가하는 범죄\n지능범죄 : 지적 능력과 계획을 통해 이루어지며, 주로 경제적 이득을 얻기 위한 범죄\n\n\n\n\n[데이터 로드]\n\n# 0. 패키지 로드\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# 1. 데이터 파일 불러오기, 원본 데이터 복사하기\n## UnicodeDecodeError 발생: encoding 지정 \n## 0번째 데이터를 열의 이름으로 지정하고 싶음:\ndf=pd.read_csv('crime.csv', header = 1, encoding='EUC-KR')\ndf.head()\n\n# 2. 원본 데이터 복사하기(deepcopy로 원본유지)\ncrime = df.copy()\n\n\n\n[변수명 변경]\n\n# 3. 변수명 바꾸기\ncrime.columns\n## 강력범죄는 s, 폭력범죄는 g, 지능범죄는 i로 시작하고 싶음 \n## 글자 바꾸기: replace, 리스트+리스트=리스트, 변수할당 적용\ncrime.columns = ['year','day']\\\n                + [i.replace(i, \"s_\"+i) for i in crime.columns[2:10]]\\\n                + [i.replace(i, \"g_\"+i) for i in crime.columns[10:18]]\\\n                + [i.replace(i, \"i_\"+i) for i in crime.columns[18:27]]\ncrime.columns\n## 행의 요일을 영어로 한번에 바꾸기 :replace()\ncrime = crime.replace({'월요일':'mon',\n                       '화요일':'tue',\n                       '수요일':'wed',\n                       '목요일':'thu',\n                       '금요일':'fri',\n                       '토요일':'sat',\n                       '일요일':'sun'})\ncrime.head(7)\n\n## 행의 순서 바꾸기(일&gt;토에서 월&gt;일로): reindex()\nlen(crime)\ncrime = crime.reindex([1,2,3,4,5,6,0,\n                       8,9,10,11,12,13,7,\n                       15,16,17,18,19,20,14,\n                       22,23,24,25,26,27,21,\n                       29,30,31,32,33,34,28])\ncrime.head(7)\n\n\n\n\n\n\n\n\nyear\nday\ns_살인기수\ns_살인미수등\ns_강도\ns_강간\ns_유사강간\ns_강제추행\ns_기타 강간·강제추행등\ns_방화\n...\ng_손괴\ni_직무유기\ni_직권남용\ni_증수뢰\ni_통화\ni_문서·인장\ni_유가증권인지\ni_사기\ni_횡령\ni_배임\n\n\n\n\n1\n2018\nmon\n40\n74\n120\n698\n113\n2197\n51\n236\n...\n7452\n105\n96\n53\n230\n2202\n20\n45478\n7968\n802\n\n\n2\n2018\ntue\n38\n62\n133\n709\n103\n2263\n48\n263\n...\n7767\n92\n110\n57\n226\n1992\n25\n45020\n7793\n761\n\n\n3\n2018\nwed\n53\n68\n116\n743\n96\n2333\n49\n235\n...\n7681\n92\n110\n69\n208\n1893\n30\n45399\n7922\n725\n\n\n4\n2018\nthu\n41\n76\n117\n646\n99\n2389\n45\n246\n...\n7514\n114\n110\n64\n242\n2710\n32\n45752\n7992\n730\n\n\n5\n2018\nfri\n54\n67\n101\n699\n99\n2547\n55\n212\n...\n8591\n103\n104\n61\n212\n1991\n58\n46698\n8817\n790\n\n\n6\n2018\nsat\n29\n69\n108\n892\n139\n2760\n59\n243\n...\n9200\n36\n40\n21\n42\n829\n15\n22158\n7819\n288\n\n\n0\n2018\nsun\n54\n72\n126\n906\n127\n2564\n49\n256\n...\n8479\n39\n33\n22\n34\n673\n17\n19524\n6802\n248\n\n\n\n\n7 rows × 27 columns\n\n\n\n\n\n[파생변수 추가]\n\n# 범죄별 건수 합계 및 총 범죄 건수 합계\ncrime = crime.assign(\n    total_s=crime.iloc[:,2:10].sum(axis=1),\n    total_g=crime.iloc[:,10:18].sum(axis=1),\n    total_i=crime.iloc[:,18:27].sum(axis=1),\n    total=crime.iloc[:,2:27].sum(axis=1)\n)\ncrime.head()\n\n## 평일: 월~금, 주말: 토~일\ncrime['day_label'] = np.where(crime['day'].isin(['mon', 'tue', 'wed', 'thu', 'fri']), 'week', 'weekend')\ncrime.head(7)\n\n\n\n\n\n\n\n\nyear\nday\ns_살인기수\ns_살인미수등\ns_강도\ns_강간\ns_유사강간\ns_강제추행\ns_기타 강간·강제추행등\ns_방화\n...\ni_문서·인장\ni_유가증권인지\ni_사기\ni_횡령\ni_배임\ntotal_s\ntotal_g\ntotal_i\ntotal\nday_label\n\n\n\n\n1\n2018\nmon\n40\n74\n120\n698\n113\n2197\n51\n236\n...\n2202\n20\n45478\n7968\n802\n3529\n37497\n56954\n97980\nweek\n\n\n2\n2018\ntue\n38\n62\n133\n709\n103\n2263\n48\n263\n...\n1992\n25\n45020\n7793\n761\n3619\n39345\n56076\n99040\nweek\n\n\n3\n2018\nwed\n53\n68\n116\n743\n96\n2333\n49\n235\n...\n1893\n30\n45399\n7922\n725\n3693\n38608\n56448\n98749\nweek\n\n\n4\n2018\nthu\n41\n76\n117\n646\n99\n2389\n45\n246\n...\n2710\n32\n45752\n7992\n730\n3659\n38576\n57746\n99981\nweek\n\n\n5\n2018\nfri\n54\n67\n101\n699\n99\n2547\n55\n212\n...\n1991\n58\n46698\n8817\n790\n3834\n41040\n58834\n103708\nweek\n\n\n6\n2018\nsat\n29\n69\n108\n892\n139\n2760\n59\n243\n...\n829\n15\n22158\n7819\n288\n4299\n47133\n31248\n82680\nweekend\n\n\n0\n2018\nsun\n54\n72\n126\n906\n127\n2564\n49\n256\n...\n673\n17\n19524\n6802\n248\n4154\n45412\n27392\n76958\nweekend\n\n\n\n\n7 rows × 32 columns\n\n\n\n\n\n[범죄별, 평일/주말별 건수 합계 그래프]\n\n# 연도 기준 범죄별 건수 합계\nplt.rcParams.update({'font.family':'Malgun Gothic','font.size' : 10})\nplt.figure(figsize = (5, 4))\n\nyear_total = crime.groupby('year')\\\n                  .agg(강력범죄=('total_s','sum'),\n                       폭력범죄=('total_g','sum'),\n                       지능범죄=('total_i','sum'))\n                       \nyear_total.plot.barh(stacked = True)\nplt.xlabel(\"건수\")\nplt.ylabel(\"연도\")\nplt.title(\"각 범죄 발생 건수 비율 그래프\")\nplt.show()\nplt.clf()\n\n# 평일/주말 기준 건수 합계\n# 평일/주말 기준 건수 합계\n# sns.barplot(data = crime, y = 'total', x = 'day_label', hue = 'day_label', errorbar=None)\nweek_end = crime.groupby('day_label',as_index=False).agg(total=('total','sum'))\nsns.barplot(data = week_end, x = 'day_label',y='total', hue = 'day_label')\nplt.xlabel(\"평일/주말\")\nplt.ylabel(\"건수(백만)\")\nplt.title(\"평일/주말별 범죄 발생 건수 그래프\")\nplt.show()\nplt.clf()\n\n&lt;Figure size 480x384 with 0 Axes&gt;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;Figure size 672x480 with 0 Axes&gt;\n\n\n\n\n[범죄별 요일별 건수 비율 그래프]\n\n# 7. 연도별 요일별 발생 비율(%)\n## 문제1. 연도별 비율을 구하기 위해 연도별 합계가 필요함: transform()\n## 소수 둘째자리까지만 보이기 : pd.options.display.float_format 변경\npd.options.display.float_format = '{:.2f}'.format\n\ncrime = crime.assign(\n    total_s_year = lambda x: x.groupby('year')['total_s'].transform('sum'),\n    ratio_s_day = lambda x: x['total_s'] / x['total_s_year'] * 100,\n    total_g_year = lambda x: x.groupby('year')['total_g'].transform('sum'),\n    ratio_g_day = lambda x: x['total_g'] / x['total_g_year'] * 100,\n    total_i_year = lambda x: x.groupby('year')['total_i'].transform('sum'),\n    ratio_i_day = lambda x: x['total_i'] / x['total_i_year'] * 100,\n    total_year = lambda x: x.groupby('year')['total'].transform('sum'),\n    ratio_day = lambda x: x['total'] / x['total_year'] * 100,\n)\ncrime.head(7)\n\n\n\n\n\n\n\n\nyear\nday\ns_살인기수\ns_살인미수등\ns_강도\ns_강간\ns_유사강간\ns_강제추행\ns_기타 강간·강제추행등\ns_방화\n...\ntotal\nday_label\ntotal_s_year\nratio_s_day\ntotal_g_year\nratio_g_day\ntotal_i_year\nratio_i_day\ntotal_year\nratio_day\n\n\n\n\n1\n2018\nmon\n40\n74\n120\n698\n113\n2197\n51\n236\n...\n97980\nweek\n26787\n13.17\n287611\n13.04\n344698\n16.52\n659096\n14.87\n\n\n2\n2018\ntue\n38\n62\n133\n709\n103\n2263\n48\n263\n...\n99040\nweek\n26787\n13.51\n287611\n13.68\n344698\n16.27\n659096\n15.03\n\n\n3\n2018\nwed\n53\n68\n116\n743\n96\n2333\n49\n235\n...\n98749\nweek\n26787\n13.79\n287611\n13.42\n344698\n16.38\n659096\n14.98\n\n\n4\n2018\nthu\n41\n76\n117\n646\n99\n2389\n45\n246\n...\n99981\nweek\n26787\n13.66\n287611\n13.41\n344698\n16.75\n659096\n15.17\n\n\n5\n2018\nfri\n54\n67\n101\n699\n99\n2547\n55\n212\n...\n103708\nweek\n26787\n14.31\n287611\n14.27\n344698\n17.07\n659096\n15.73\n\n\n6\n2018\nsat\n29\n69\n108\n892\n139\n2760\n59\n243\n...\n82680\nweekend\n26787\n16.05\n287611\n16.39\n344698\n9.07\n659096\n12.54\n\n\n0\n2018\nsun\n54\n72\n126\n906\n127\n2564\n49\n256\n...\n76958\nweekend\n26787\n15.51\n287611\n15.79\n344698\n7.95\n659096\n11.68\n\n\n\n\n7 rows × 40 columns\n\n\n\n\n# 연도별 요일별 범죄 건수 변화\nratio_year_day = crime.iloc[:,[0,1,-7,-5,-3,-1]]\nratio_year_day.head(7)\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_s_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.xlabel(\"연도\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"강력범죄 연도별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_g_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.xlabel(\"연도\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"폭력범죄 연도별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_i_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.xlabel(\"연도\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"지능범죄 연도별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.xlabel(\"연도\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"전체 범죄 연도별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;Figure size 672x480 with 0 Axes&gt;\n\n\n\n\n[요일 기준 범죄별 비율 비교 그래프]\n\ntotal_day=crime.groupby('day').agg(total_s=('total_s','sum'),\n                                 total_g=('total_g','sum'),\n                                 total_i=('total_i','sum'),\n                                 total=('total','sum'))\ntotal_day = total_day.reindex(index=['mon','tue','wed','thu','fri','sat','sun'])\ntotal_day\ntotal_day = total_day.assign(\n    강력범죄 = lambda x: x['total_s'] / sum(x['total_s']) * 100,\n    폭력범죄 = lambda x: x['total_g'] / sum(x['total_g']) * 100,\n    지능범죄 = lambda x: x['total_i'] / sum(x['total_i']) * 100,\n    총_범죄율 = lambda x: x['total'] / sum(x['total']) * 100\n)\nratio_total_day = total_day.iloc[:,4:]\nratio_total_day\n\nsns.lineplot(data= ratio_total_day)\nplt.xlabel(\"요일\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"요일 기준 범죄율 비교 그래프\")\nplt.show()\n\n\n\n\n\n\n\n\n\n결론 : 강력범죄/폭력범죄는 가설에 성립하지만, 지능범죄는 반대의 결과가 도출되었다. 따라서, 강력범죄는 화요일, 폭력범죄는 월요일, 지능범죄는 일요일이 가장 안전하다.\n\n\n생각해봐야 할 점 : 지능범죄가 평일에 많이 발생하는 이유는, 공공기관/기업 업무 시간에 이루어져야 하는 행위가 많기 때문이라고 예상된다. 하지만 데이터의 한계로 추가 확인이 필요하다."
  },
  {
    "objectID": "index.html#주제-어느-요일이-범죄로부터-가장-안전할까",
    "href": "index.html#주제-어느-요일이-범죄로부터-가장-안전할까",
    "title": "어느 요일이 범죄로부터 가장 안전할까?",
    "section": "",
    "text": "import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\ndf = pd.read_csv('crime.csv', header = 1, encoding='EUC-KR')\ndf.head()\n\n\n\n\n\n\n\n\n시점\n범죄발생요일별(1)\n살인기수\n살인미수등\n강도\n강간\n유사강간\n강제추행\n기타 강간·강제추행등\n방화\n...\n손괴\n직무유기\n직권남용\n증수뢰\n통화\n문서·인장\n유가증권인지\n사기\n횡령\n배임\n\n\n\n\n0\n2018\n일요일\n54\n72\n126\n906\n127\n2564\n49\n256\n...\n8479\n39\n33\n22\n34\n673\n17\n19524\n6802\n248\n\n\n1\n2018\n월요일\n40\n74\n120\n698\n113\n2197\n51\n236\n...\n7452\n105\n96\n53\n230\n2202\n20\n45478\n7968\n802\n\n\n2\n2018\n화요일\n38\n62\n133\n709\n103\n2263\n48\n263\n...\n7767\n92\n110\n57\n226\n1992\n25\n45020\n7793\n761\n\n\n3\n2018\n수요일\n53\n68\n116\n743\n96\n2333\n49\n235\n...\n7681\n92\n110\n69\n208\n1893\n30\n45399\n7922\n725\n\n\n4\n2018\n목요일\n41\n76\n117\n646\n99\n2389\n45\n246\n...\n7514\n114\n110\n64\n242\n2710\n32\n45752\n7992\n730\n\n\n\n\n5 rows × 27 columns"
  },
  {
    "objectID": "index.html#데이터-20182022년-강력폭력지능범죄의-요일별-발생-건수-데이터",
    "href": "index.html#데이터-20182022년-강력폭력지능범죄의-요일별-발생-건수-데이터",
    "title": "어느 요일이 범죄로부터 가장 안전할까?",
    "section": "데이터 : 2018~2022년 강력/폭력/지능범죄의 요일별 발생 건수 데이터",
    "text": "데이터 : 2018~2022년 강력/폭력/지능범죄의 요일별 발생 건수 데이터\n\n데이터 로드\n\n# 0. 패키지 로드\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# 1. 데이터 파일 불러오기, 원본 데이터 복사하기\n## UnicodeDecodeError 발생: encoding 지정 \n## 0번째 데이터를 열의 이름으로 지정하고 싶음:\ndf=pd.read_csv('crime.csv', header = 1, encoding='EUC-KR')\ndf.head()\n\n# 2. 원본 데이터 복사하기(deepcopy로 원본유지)\ncrime = df.copy()\n\n\n\n변수명 변경\n\n# 3. 변수명 바꾸기\ncrime.columns\n## 강력범죄는 s, 폭력범죄는 g, 지능범죄는 i로 시작하고 싶음 \n## 글자 바꾸기: replace, 리스트+리스트=리스트, 변수할당 적용\ncrime.columns = ['year','day']\\\n                + [i.replace(i, \"s_\"+i) for i in crime.columns[2:10]]\\\n                + [i.replace(i, \"g_\"+i) for i in crime.columns[10:18]]\\\n                + [i.replace(i, \"i_\"+i) for i in crime.columns[18:27]]\ncrime.columns\n## 행의 요일을 영어로 한번에 바꾸기 :replace()\ncrime = crime.replace({'월요일':'mon',\n                       '화요일':'tue',\n                       '수요일':'wed',\n                       '목요일':'thu',\n                       '금요일':'fri',\n                       '토요일':'sat',\n                       '일요일':'sun'})\ncrime.head(7)\n\n## 행의 순서 바꾸기(일&gt;토에서 월&gt;일로): reindex()\nlen(crime)\ncrime = crime.reindex([1,2,3,4,5,6,0,\n                       8,9,10,11,12,13,7,\n                       15,16,17,18,19,20,14,\n                       22,23,24,25,26,27,21,\n                       29,30,31,32,33,34,28])\ncrime.head(7)\n\n\n\n\n\n\n\n\nyear\nday\ns_살인기수\ns_살인미수등\ns_강도\ns_강간\ns_유사강간\ns_강제추행\ns_기타 강간·강제추행등\ns_방화\n...\ng_손괴\ni_직무유기\ni_직권남용\ni_증수뢰\ni_통화\ni_문서·인장\ni_유가증권인지\ni_사기\ni_횡령\ni_배임\n\n\n\n\n1\n2018\nmon\n40\n74\n120\n698\n113\n2197\n51\n236\n...\n7452\n105\n96\n53\n230\n2202\n20\n45478\n7968\n802\n\n\n2\n2018\ntue\n38\n62\n133\n709\n103\n2263\n48\n263\n...\n7767\n92\n110\n57\n226\n1992\n25\n45020\n7793\n761\n\n\n3\n2018\nwed\n53\n68\n116\n743\n96\n2333\n49\n235\n...\n7681\n92\n110\n69\n208\n1893\n30\n45399\n7922\n725\n\n\n4\n2018\nthu\n41\n76\n117\n646\n99\n2389\n45\n246\n...\n7514\n114\n110\n64\n242\n2710\n32\n45752\n7992\n730\n\n\n5\n2018\nfri\n54\n67\n101\n699\n99\n2547\n55\n212\n...\n8591\n103\n104\n61\n212\n1991\n58\n46698\n8817\n790\n\n\n6\n2018\nsat\n29\n69\n108\n892\n139\n2760\n59\n243\n...\n9200\n36\n40\n21\n42\n829\n15\n22158\n7819\n288\n\n\n0\n2018\nsun\n54\n72\n126\n906\n127\n2564\n49\n256\n...\n8479\n39\n33\n22\n34\n673\n17\n19524\n6802\n248\n\n\n\n\n7 rows × 27 columns\n\n\n\n\n\n파생변수 추가\n\n# 범죄별 건수 합계 및 총 범죄 건수 합계\ncrime = crime.assign(\n    total_s=crime.iloc[:,2:10].sum(axis=1),\n    total_g=crime.iloc[:,10:18].sum(axis=1),\n    total_i=crime.iloc[:,18:27].sum(axis=1),\n    total=crime.iloc[:,2:27].sum(axis=1)\n)\ncrime.head()\n\n## 평일: 월~금, 주말: 토~일\ncrime['day_label'] = np.where(crime['day'].isin(['mon', 'tue', 'wed', 'thu', 'fri']), 'week', 'weekend')\ncrime.head(7)\n\n\n\n\n\n\n\n\nyear\nday\ns_살인기수\ns_살인미수등\ns_강도\ns_강간\ns_유사강간\ns_강제추행\ns_기타 강간·강제추행등\ns_방화\n...\ni_문서·인장\ni_유가증권인지\ni_사기\ni_횡령\ni_배임\ntotal_s\ntotal_g\ntotal_i\ntotal\nday_label\n\n\n\n\n1\n2018\nmon\n40\n74\n120\n698\n113\n2197\n51\n236\n...\n2202\n20\n45478\n7968\n802\n3529\n37497\n56954\n97980\nweek\n\n\n2\n2018\ntue\n38\n62\n133\n709\n103\n2263\n48\n263\n...\n1992\n25\n45020\n7793\n761\n3619\n39345\n56076\n99040\nweek\n\n\n3\n2018\nwed\n53\n68\n116\n743\n96\n2333\n49\n235\n...\n1893\n30\n45399\n7922\n725\n3693\n38608\n56448\n98749\nweek\n\n\n4\n2018\nthu\n41\n76\n117\n646\n99\n2389\n45\n246\n...\n2710\n32\n45752\n7992\n730\n3659\n38576\n57746\n99981\nweek\n\n\n5\n2018\nfri\n54\n67\n101\n699\n99\n2547\n55\n212\n...\n1991\n58\n46698\n8817\n790\n3834\n41040\n58834\n103708\nweek\n\n\n6\n2018\nsat\n29\n69\n108\n892\n139\n2760\n59\n243\n...\n829\n15\n22158\n7819\n288\n4299\n47133\n31248\n82680\nweekend\n\n\n0\n2018\nsun\n54\n72\n126\n906\n127\n2564\n49\n256\n...\n673\n17\n19524\n6802\n248\n4154\n45412\n27392\n76958\nweekend\n\n\n\n\n7 rows × 32 columns\n\n\n\n\n\n범죄별 건수 합계 비율 그래프\n\n# 연도 기준 범죄별 건수 합계\nplt.rcParams.update({'font.family':'Malgun Gothic','font.size' : 10})\nplt.figure(figsize = (5, 4))\n\nyear_total = crime.groupby('year')\\\n                  .agg(강력범죄=('total_s','sum'),\n                       폭력범죄=('total_g','sum'),\n                       지능범죄=('total_i','sum'))\n                       \nyear_total.plot.barh(stacked = True)\nplt.show()\nplt.clf()\n\n# 평일/주말 기준 건수 합계\nsns.barplot(data = crime, y = 'total', x = 'day_label', hue = 'day_label')\nplt.show()\nplt.clf()\n\n&lt;Figure size 480x384 with 0 Axes&gt;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;Figure size 672x480 with 0 Axes&gt;\n\n\n\n\n범죄별 건수 비율 그래프\n\n# 7. 연도별 요일별 발생 비율(%)\n## 문제1. 연도별 비율을 구하기 위해 연도별 합계가 필요함: transform()\n## 소수 둘째자리까지만 보이기 : pd.options.display.float_format 변경\npd.options.display.float_format = '{:.2f}'.format\n\ncrime = crime.assign(\n    total_s_year = lambda x: x.groupby('year')['total_s'].transform('sum'),\n    ratio_s_day = lambda x: x['total_s'] / x['total_s_year'] * 100,\n    total_g_year = lambda x: x.groupby('year')['total_g'].transform('sum'),\n    ratio_g_day = lambda x: x['total_g'] / x['total_g_year'] * 100,\n    total_i_year = lambda x: x.groupby('year')['total_i'].transform('sum'),\n    ratio_i_day = lambda x: x['total_i'] / x['total_i_year'] * 100,\n    total_year = lambda x: x.groupby('year')['total'].transform('sum'),\n    ratio_day = lambda x: x['total'] / x['total_year'] * 100,\n)\ncrime.iloc[:,[0,1,-8,-7,-6,-5,-4,-3,-2,-1]]\n\n# 연도별 요일별 범죄 건수 변화\nratio_year_day = crime.iloc[:,[0,1,-7,-5,-3,-1]]\nratio_year_day.head(7)\nplt.figure(figsize=(10, 4))\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_s_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.show()\nplt.clf()\n\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_g_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.show()\nplt.clf()\n\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_i_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.show()\nplt.clf()\n\nsns.lineplot(data=ratio_year_day, x='year', y='ratio_day', hue='day')\nplt.xticks(np.arange(2018,2023))\nplt.show()\nplt.clf()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;Figure size 672x480 with 0 Axes&gt;"
  }
]